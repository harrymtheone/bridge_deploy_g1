<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="g1_29dof_rev_1_0">

  <!-- ==================== Properties ==================== -->
  <xacro:property name="mesh_path" value="package://g1_description/meshes"/>
  
  <!-- ==================== Materials ==================== -->
  <xacro:macro name="material_dark">
    <material name="dark">
      <color rgba="0.2 0.2 0.2 1"/>
    </material>
  </xacro:macro>
  
  <xacro:macro name="material_white">
    <material name="white">
      <color rgba="0.7 0.7 0.7 1"/>
    </material>
  </xacro:macro>

  <!-- ==================== MuJoCo Compiler ==================== -->
  <mujoco>
    <compiler meshdir="../meshes" discardvisual="false"/>
  </mujoco>

  <!-- [CAUTION] uncomment when convert to mujoco -->
  <!-- <link name="world"></link>
  <joint name="floating_base_joint" type="floating">
    <parent link="world"/>
    <child link="base_link"/>
  </joint> -->

  <!-- ==================== Base Link (Pelvis) ==================== -->
  <link name="base_link">
    <inertial>
      <origin xyz="0 0 -0.07605" rpy="0 0 0"/>
      <mass value="3.813"/>
      <inertia ixx="0.010549" ixy="0" ixz="2.1E-06" iyy="0.0093089" iyz="0" izz="0.0079184"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="${mesh_path}/pelvis.STL"/>
      </geometry>
      <xacro:material_dark/>
    </visual>
    <collision>
      <origin xyz="0 0 -0.08"/>
      <geometry>
        <sphere radius="0.07"/>
      </geometry>
    </collision>
  </link>

  <link name="pelvis_contour_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.001"/>
      <inertia ixx="1e-7" ixy="0" ixz="0" iyy="1e-7" iyz="0" izz="1e-7"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="${mesh_path}/pelvis_contour_link.STL"/>
      </geometry>
      <xacro:material_white/>
    </visual>
  </link>

  <joint name="pelvis_contour_joint" type="fixed">
    <parent link="base_link"/>
    <child link="pelvis_contour_link"/>
  </joint>

  <!-- ==================== Leg Macro ==================== -->
  <xacro:macro name="leg" params="side side_name sign">
    <!-- Hip Pitch -->
    <link name="leg_${side}1_link">
      <inertial>
        <origin xyz="0.002741 ${sign*0.047791} -0.02606" rpy="0 0 0"/>
        <mass value="1.35"/>
        <inertia ixx="0.001811" ixy="${sign*3.68E-05}" ixz="-3.44E-05" iyy="0.0014193" iyz="${sign*0.000171}" izz="0.0012812"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_hip_pitch_link.STL"/>
        </geometry>
        <xacro:material_dark/>
      </visual>
    </link>

    <joint name="leg_${side}1_joint" type="revolute">
      <origin xyz="0 ${sign*0.064452} -0.1027" rpy="0 0 0"/>
      <parent link="base_link"/>
      <child link="leg_${side}1_link"/>
      <axis xyz="0 1 0"/>
      <limit lower="-2.5307" upper="2.8798" effort="88" velocity="32"/>
    </joint>

    <!-- Hip Roll -->
    <link name="leg_${side}2_link">
      <inertial>
        <origin xyz="0.029812 ${sign*-0.001045} -0.087934" rpy="0 0 0"/>
        <mass value="1.52"/>
        <inertia ixx="0.0023773" ixy="${sign*-3.8E-06}" ixz="-0.0003908" iyy="0.0024123" iyz="${sign*1.84E-05}" izz="0.0016595"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_hip_roll_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
      <collision>
        <origin xyz="0.02 0 -0.1"/>
        <geometry>
          <cylinder radius="0.05" length="0.2"/>
        </geometry>
      </collision>
    </link>

    <joint name="leg_${side}2_joint" type="revolute">
      <origin xyz="0 ${sign*0.052} -0.030465" rpy="0 -0.1749 0"/>
      <parent link="leg_${side}1_link"/>
      <child link="leg_${side}2_link"/>
      <axis xyz="1 0 0"/>
      <xacro:if value="${side == 'l'}">
        <limit lower="-0.5236" upper="2.9671" effort="139" velocity="20"/>
      </xacro:if>
      <xacro:if value="${side == 'r'}">
        <limit lower="-2.9671" upper="0.5236" effort="139" velocity="20"/>
      </xacro:if>
    </joint>

    <!-- Hip Yaw -->
    <link name="leg_${side}3_link">
      <inertial>
        <origin xyz="-0.057709 ${sign*-0.010981} -0.15078" rpy="0 0 0"/>
        <mass value="1.702"/>
        <inertia ixx="0.0057774" ixy="${sign*-0.0005411}" ixz="-0.0023948" iyy="0.0076124" iyz="${sign*-0.0007072}" izz="0.003149"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_hip_yaw_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
    </link>

    <joint name="leg_${side}3_joint" type="revolute">
      <origin xyz="0.025001 0 -0.12412" rpy="0 0 0"/>
      <parent link="leg_${side}2_link"/>
      <child link="leg_${side}3_link"/>
      <axis xyz="0 0 1"/>
      <limit lower="-2.7576" upper="2.7576" effort="88" velocity="32"/>
    </joint>

    <!-- Knee -->
    <link name="leg_${side}4_link">
      <inertial>
        <origin xyz="0.005457 ${sign*0.003964} -0.12074" rpy="0 0 0"/>
        <mass value="1.932"/>
        <inertia ixx="0.011329" ixy="${sign*4.82E-05}" ixz="${sign*-4.49E-05}" iyy="0.011277" iyz="${sign*-0.0007146}" izz="0.0015168"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_knee_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
      <collision>
        <origin xyz="0.02 0 -0.1"/>
        <geometry>
          <cylinder radius="0.05" length="0.2"/>
        </geometry>
      </collision>
    </link>

    <joint name="leg_${side}4_joint" type="revolute">
      <origin xyz="-0.078273 ${sign*0.0021489} -0.17734" rpy="0 0.1749 0"/>
      <parent link="leg_${side}3_link"/>
      <child link="leg_${side}4_link"/>
      <axis xyz="0 1 0"/>
      <limit lower="-0.087267" upper="2.8798" effort="139" velocity="20"/>
    </joint>

    <!-- Ankle Pitch -->
    <link name="leg_${side}5_link">
      <inertial>
        <origin xyz="-0.007269 0 0.011137" rpy="0 0 0"/>
        <mass value="0.074"/>
        <inertia ixx="8.4E-06" ixy="0" ixz="-2.9E-06" iyy="1.89E-05" iyz="0" izz="1.26E-05"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_ankle_pitch_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
    </link>

    <joint name="leg_${side}5_joint" type="revolute">
      <origin xyz="0 ${sign*-9.4445E-05} -0.30001" rpy="0 0 0"/>
      <parent link="leg_${side}4_link"/>
      <child link="leg_${side}5_link"/>
      <axis xyz="0 1 0"/>
      <limit lower="-0.87267" upper="0.5236" effort="50" velocity="37"/>
    </joint>

    <!-- Ankle Roll -->
    <link name="leg_${side}6_link">
      <inertial>
        <origin xyz="0.026505 0 -0.016425" rpy="0 0 0"/>
        <mass value="0.608"/>
        <inertia ixx="0.0002231" ixy="${sign*2E-07}" ixz="8.91E-05" iyy="0.0016161" iyz="${sign*-1E-07}" izz="0.0016667"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_ankle_roll_link.STL"/>
        </geometry>
        <xacro:material_dark/>
      </visual>
      <collision>
        <origin xyz="0.075 -0.026 -0.025" rpy="0 1.5708 0"/>
        <geometry>
          <cylinder radius="0.01" length="0.05"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0.0395 -0.018 -0.025" rpy="0 -1.5708 0"/>
        <geometry>
          <cylinder radius="0.008" length="0.167"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0.039 -0.01 -0.025" rpy="0 -1.5708 0"/>
        <geometry>
          <cylinder radius="0.01" length="0.182"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0.039 0 -0.025" rpy="0 -1.5708 0"/>
        <geometry>
          <cylinder radius="0.01" length="0.186"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0.039 0.01 -0.025" rpy="0 -1.5708 0"/>
        <geometry>
          <cylinder radius="0.01" length="0.182"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0.0395 0.018 -0.025" rpy="0 -1.5708 0"/>
        <geometry>
          <cylinder radius="0.008" length="0.167"/>
        </geometry>
      </collision>
      <collision>
        <origin xyz="0.075 0.026 -0.025" rpy="0 1.5708 0"/>
        <geometry>
          <cylinder radius="0.01" length="0.05"/>
        </geometry>
      </collision>
    </link>

    <joint name="leg_${side}6_joint" type="revolute">
      <origin xyz="0 0 -0.017558" rpy="0 0 0"/>
      <parent link="leg_${side}5_link"/>
      <child link="leg_${side}6_link"/>
      <axis xyz="1 0 0"/>
      <limit lower="-0.2618" upper="0.2618" effort="50" velocity="37"/>
    </joint>
  </xacro:macro>

  <!-- Instantiate legs -->
  <xacro:leg side="l" side_name="left" sign="1"/>
  <xacro:leg side="r" side_name="right" sign="-1"/>

  <!-- ==================== Torso ==================== -->
  <link name="waist_yaw_link">
    <inertial>
      <origin xyz="0.003494 0.000233 0.018034" rpy="0 0 0"/>
      <mass value="0.214"/>
      <inertia ixx="0.00010673" ixy="2.703E-06" ixz="-7.631E-06" iyy="0.00010422" iyz="-2.01E-07" izz="0.0001625"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="${mesh_path}/waist_yaw_link_rev_1_0.STL"/>
      </geometry>
      <xacro:material_white/>
    </visual>
  </link>

  <joint name="waist_yaw_joint" type="revolute">
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="waist_yaw_link"/>
    <axis xyz="0 0 1"/>
    <limit lower="-2.618" upper="2.618" effort="88" velocity="32"/>
  </joint>

  <link name="waist_roll_link">
    <inertial>
      <origin xyz="0 2.3E-05 0" rpy="0 0 0"/>
      <mass value="0.086"/>
      <inertia ixx="7.079E-06" ixy="0" ixz="0" iyy="6.339E-06" iyz="0" izz="8.245E-06"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="${mesh_path}/waist_roll_link_rev_1_0.STL"/>
      </geometry>
      <xacro:material_white/>
    </visual>
  </link>

  <joint name="waist_roll_joint" type="revolute">
    <origin xyz="-0.0039635 0 0.044" rpy="0 0 0"/>
    <parent link="waist_yaw_link"/>
    <child link="waist_roll_link"/>
    <axis xyz="1 0 0"/>
    <limit lower="-0.52" upper="0.52" effort="50" velocity="37"/>
  </joint>

  <link name="torso_link">
    <inertial>
      <origin xyz="0.000931 0.000346 0.15082" rpy="0 0 0"/>
      <mass value="6.78"/>
      <inertia ixx="0.05905" ixy="3.3302E-05" ixz="-0.0017715" iyy="0.047014" iyz="-2.2399E-05" izz="0.025652"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="${mesh_path}/torso_link_rev_1_0.STL"/>
      </geometry>
      <xacro:material_white/>
    </visual>
    <collision>
      <origin xyz="0.005 0 0.22" rpy="1.5708 0 0"/>
      <geometry>
        <cylinder radius="0.073" length="0.064"/>
      </geometry>
    </collision>
    <collision>
      <origin xyz="0.005 0 0.13" rpy="1.5708 0 0"/>
      <geometry>
        <cylinder radius="0.07" length="0.056"/>
      </geometry>
    </collision>
    <collision>
      <origin xyz="0.005 0 0.06" rpy="1.5708 0 0"/>
      <geometry>
        <cylinder radius="0.065" length="0.04"/>
      </geometry>
    </collision>
    <collision>
      <origin xyz="0.01 0 0.415" rpy="3.1416 0 0"/>
      <geometry>
        <cylinder radius="0.068" length="0.01"/>
      </geometry>
    </collision>
  </link>

  <joint name="waist_pitch_joint" type="revolute">
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <parent link="waist_roll_link"/>
    <child link="torso_link"/>
    <axis xyz="0 1 0"/>
    <limit lower="-0.52" upper="0.52" effort="50" velocity="37"/>
  </joint>

  <!-- Logo -->
  <joint name="logo_joint" type="fixed">
    <origin xyz="0.0039635 0 -0.044" rpy="0 0 0"/>
    <parent link="torso_link"/>
    <child link="logo_link"/>
  </joint>

  <link name="logo_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.001"/>
      <inertia ixx="1e-7" ixy="0" ixz="0" iyy="1e-7" iyz="0" izz="1e-7"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="${mesh_path}/logo_link.STL"/>
      </geometry>
      <xacro:material_dark/>
    </visual>
  </link>

  <!-- Head -->
  <link name="head_link">
    <inertial>
      <origin xyz="0.005267 0.000299 0.449869" rpy="0 0 0"/>
      <mass value="1.036"/>
      <inertia ixx="0.004085051" ixy="-2.543E-06" ixz="-6.9455E-05" iyy="0.004185212" iyz="-3.726E-06" izz="0.001807911"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="${mesh_path}/head_link.STL"/>
      </geometry>
      <xacro:material_dark/>
    </visual>
  </link>

  <joint name="head_joint" type="fixed">
    <origin xyz="0.0039635 0 -0.044" rpy="0 0 0"/>
    <parent link="torso_link"/>
    <child link="head_link"/>
  </joint>

  <!-- ==================== IMU Links ==================== -->
  <link name="imu_in_torso"/>
  <joint name="imu_in_torso_joint" type="fixed">
    <origin xyz="-0.03959 -0.00224 0.14792" rpy="0 0 0"/>
    <parent link="torso_link"/>
    <child link="imu_in_torso"/>
  </joint>

  <link name="imu_in_pelvis"/>
  <joint name="imu_in_pelvis_joint" type="fixed">
    <origin xyz="0.04525 0 -0.08339" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="imu_in_pelvis"/>
  </joint>

  <!-- Mid360 Lidar -->
  <link name="mid360_link"/>
  <joint name="mid360_joint" type="fixed">
    <origin xyz="0.0002835 0.00003 0.41618" rpy="0 3.101 3.1415"/>
    <parent link="torso_link"/>
    <child link="mid360_link"/>
  </joint>

  <!-- ==================== Arm Macro ==================== -->
  <xacro:macro name="arm" params="side side_name sign">
    <!-- Shoulder Pitch -->
    <link name="arm_${side}1_link">
      <inertial>
        <origin xyz="0 ${sign*0.035892} -0.011628" rpy="0 0 0"/>
        <mass value="0.718"/>
        <inertia ixx="0.0004291" ixy="${sign*-9.2E-06}" ixz="6.4E-06" iyy="0.000453" iyz="${sign*2.26E-05}" izz="0.000423"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_shoulder_pitch_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
    </link>

    <joint name="arm_${side}1_joint" type="revolute">
      <origin xyz="0.0039563 ${sign*0.10022} 0.24778" rpy="${sign*0.27931} 5.4949E-05 ${sign*-0.00019159}"/>
      <parent link="torso_link"/>
      <child link="arm_${side}1_link"/>
      <axis xyz="0 1 0"/>
      <limit lower="-3.0892" upper="2.6704" effort="25" velocity="37"/>
    </joint>

    <!-- Shoulder Roll -->
    <link name="arm_${side}2_link">
      <inertial>
        <origin xyz="-0.000227 ${sign*0.00727} -0.063243" rpy="0 0 0"/>
        <mass value="0.643"/>
        <inertia ixx="0.0006177" ixy="${sign*-1E-06}" ixz="8.7E-06" iyy="0.0006912" iyz="${sign*-5.3E-06}" izz="0.0003894"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_shoulder_roll_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
    </link>

    <joint name="arm_${side}2_joint" type="revolute">
      <origin xyz="0 ${sign*0.038} -0.013831" rpy="${sign*-0.27925} 0 0"/>
      <parent link="arm_${side}1_link"/>
      <child link="arm_${side}2_link"/>
      <axis xyz="1 0 0"/>
      <xacro:if value="${side == 'l'}">
        <limit lower="-1.5882" upper="2.2515" effort="25" velocity="37"/>
      </xacro:if>
      <xacro:if value="${side == 'r'}">
        <limit lower="-2.2515" upper="1.5882" effort="25" velocity="37"/>
      </xacro:if>
    </joint>

    <!-- Shoulder Yaw -->
    <link name="arm_${side}3_link">
      <inertial>
        <origin xyz="0.010773 ${sign*-0.002949} -0.072009" rpy="0 0 0"/>
        <mass value="0.734"/>
        <inertia ixx="0.0009988" ixy="${sign*7.9E-06}" ixz="0.0001412" iyy="0.0010605" iyz="${sign*-2.86E-05}" izz="0.0004354"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_shoulder_yaw_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
      <collision>
        <origin xyz="0 0 -0.015" rpy="3.1416 0 0"/>
        <geometry>
          <cylinder radius="0.035" length="0.13"/>
        </geometry>
      </collision>
    </link>

    <joint name="arm_${side}3_joint" type="revolute">
      <origin xyz="0 ${sign*0.00624} -0.1032" rpy="0 0 0"/>
      <parent link="arm_${side}2_link"/>
      <child link="arm_${side}3_link"/>
      <axis xyz="0 0 1"/>
      <limit lower="-2.618" upper="2.618" effort="25" velocity="37"/>
    </joint>

    <!-- Elbow -->
    <link name="arm_${side}4_link">
      <inertial>
        <origin xyz="0.064956 ${sign*0.004454} -0.010062" rpy="0 0 0"/>
        <mass value="0.6"/>
        <inertia ixx="0.0002891" ixy="${sign*6.53E-05}" ixz="1.72E-05" iyy="0.0004152" iyz="${sign*-5.6E-06}" izz="0.0004197"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_elbow_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
      <collision>
        <origin xyz="0.055 0 -0.01" rpy="0 -1.5708 0"/>
        <geometry>
          <cylinder radius="0.035" length="0.13"/>
        </geometry>
      </collision>
    </link>

    <joint name="arm_${side}4_joint" type="revolute">
      <origin xyz="0.015783 0 -0.080518" rpy="0 0 0"/>
      <parent link="arm_${side}3_link"/>
      <child link="arm_${side}4_link"/>
      <axis xyz="0 1 0"/>
      <limit lower="-1.0472" upper="2.0944" effort="25" velocity="37"/>
    </joint>

    <!-- Wrist Roll -->
    <link name="arm_${side}5_link">
      <inertial>
        <origin xyz="0.01713944778 ${sign*0.00053759094} 0.00000048864" rpy="0 0 0"/>
        <mass value="0.08544498"/>
        <inertia ixx="0.00004821544023" ixy="${sign*-0.00000424511021}" ixz="0.00000000510599" iyy="0.00003722899093" iyz="${sign*-0.00000000123525}" izz="0.00005482106541"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_wrist_roll_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
    </link>

    <joint name="arm_${side}5_joint" type="revolute">
      <origin xyz="0.100 ${sign*0.00188791} -0.010" rpy="0 0 0"/>
      <parent link="arm_${side}4_link"/>
      <child link="arm_${side}5_link"/>
      <axis xyz="1 0 0"/>
      <limit effort="25" velocity="37" lower="-1.972222054" upper="1.972222054"/>
    </joint>

    <!-- Wrist Pitch -->
    <link name="arm_${side}6_link">
      <inertial>
        <origin xyz="0.02299989837 ${sign*-0.00111685314} -0.00111658096" rpy="0 0 0"/>
        <mass value="0.48404956"/>
        <inertia ixx="0.00016579646273" ixy="${sign*-0.00001231206746}" ixz="0.00001231699194" iyy="0.00042954057410" iyz="${sign*0.00000081417712}" izz="0.00042953697654"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_wrist_pitch_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
    </link>

    <joint name="arm_${side}6_joint" type="revolute">
      <origin xyz="0.038 0 0" rpy="0 0 0"/>
      <parent link="arm_${side}5_link"/>
      <child link="arm_${side}6_link"/>
      <axis xyz="0 1 0"/>
      <limit effort="5" velocity="22" lower="-1.614429558" upper="1.614429558"/>
    </joint>

    <!-- Wrist Yaw -->
    <link name="arm_${side}7_link">
      <inertial>
        <origin xyz="0.02200381568 ${sign*-0.00049485096} 0.00053861123" rpy="0 0 0"/>
        <mass value="0.08457647"/>
        <inertia ixx="0.00004929128828" ixy="${sign*0.00000045735494}" ixz="0.00000445867591" iyy="0.00005973338134" iyz="${sign*-0.00000043217198}" izz="0.00003928083826"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_wrist_yaw_link.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
      <collision>
        <origin xyz="0.075 0 0" rpy="0 -1.5708 0"/>
        <geometry>
          <cylinder radius="0.05" length="0.05"/>
        </geometry>
      </collision>
    </link>

    <joint name="arm_${side}7_joint" type="revolute">
      <origin xyz="0.046 0 0" rpy="0 0 0"/>
      <parent link="arm_${side}6_link"/>
      <child link="arm_${side}7_link"/>
      <axis xyz="0 0 1"/>
      <limit effort="5" velocity="22" lower="-1.614429558" upper="1.614429558"/>
    </joint>

    <!-- Rubber Hand -->
    <link name="${side}_rubber_hand">
      <inertial>
        <origin xyz="0.05361310808 ${sign*-0.00295905240} 0.00215413091" rpy="0 0 0"/>
        <mass value="0.170"/>
        <inertia ixx="0.00010099485234748" ixy="${sign*0.00003618590790516}" ixz="-0.00000074301518642" iyy="0.00028135871571621" iyz="${sign*0.00000330189743286}" izz="0.00021894770413514"/>
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="${mesh_path}/${side_name}_rubber_hand.STL"/>
        </geometry>
        <xacro:material_white/>
      </visual>
    </link>

    <joint name="${side}_hand_palm_joint" type="fixed">
      <origin xyz="0.0415 ${sign*0.003} 0" rpy="0 0 0"/>
      <parent link="arm_${side}7_link"/>
      <child link="${side}_rubber_hand"/>
    </joint>
  </xacro:macro>

  <!-- Instantiate arms -->
  <xacro:arm side="l" side_name="left" sign="1"/>
  <xacro:arm side="r" side_name="right" sign="-1"/>

  <!-- ==================== Foot Frames (commented) ==================== -->
  <!-- <link name="LL_FOOT">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1e-9"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
  </link>
  <joint name="LL_FOOT_frame" type="fixed">
    <origin xyz="0.04 0 -0.037" rpy="0 0 0"/>
    <parent link="leg_l6_link"/>
    <child link="LL_FOOT"/>
  </joint>

  <link name="LR_FOOT">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1e-9"/>
      <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0"/>
    </inertial>
  </link>
  <joint name="LR_FOOT_frame" type="fixed">
    <origin xyz="0.04 0 -0.037" rpy="0 0 0"/>
    <parent link="leg_r6_link"/>
    <child link="LR_FOOT"/>
  </joint> -->

</robot>

